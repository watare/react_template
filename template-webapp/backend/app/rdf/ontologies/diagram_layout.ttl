@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix cim: <http://iec.ch/TC57/CIM100#> .
@prefix dl: <http://vpac.energy/ontology/diagram-layout#> .

# ===================================================================
# Diagram Layout Ontology - Extension for IEC 61850 / CIM
# ===================================================================
# Purpose: Store graphical positions of equipment in Single Line Diagrams
# Based on: CIM DiagramLayout profile (IEC 61970-453)
# Extended for: IEC 61850 substations and visual editing
# ===================================================================

<http://vpac.energy/ontology/diagram-layout#> a owl:Ontology ;
    rdfs:label "VPAC Diagram Layout Ontology"@en ;
    rdfs:comment "Ontology for persisting graphical positions of electrical equipment in Single Line Diagrams"@en ;
    owl:versionInfo "1.0.0" .

# ===================================================================
# Classes
# ===================================================================

dl:Diagram a owl:Class ;
    rdfs:label "Diagram"@en ;
    rdfs:comment "A graphical representation of a substation or network"@en ;
    rdfs:subClassOf cim:IdentifiedObject .

dl:DiagramObject a owl:Class ;
    rdfs:label "Diagram Object"@en ;
    rdfs:comment "Links an equipment (ConductingEquipment, VoltageLevel, Bay) to its graphical representation"@en .

dl:DiagramObjectPoint a owl:Class ;
    rdfs:label "Diagram Object Point"@en ;
    rdfs:comment "A point in 2D space (x, y) that defines the position of a diagram object or connection line"@en .

dl:DiagramObjectStyle a owl:Class ;
    rdfs:label "Diagram Object Style"@en ;
    rdfs:comment "Visual styling information (color, stroke, rotation) for a diagram object"@en .

# ===================================================================
# Properties - Diagram
# ===================================================================

dl:diagram a owl:ObjectProperty ;
    rdfs:label "diagram"@en ;
    rdfs:comment "Links a DiagramObject to its parent Diagram"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range dl:Diagram .

dl:diagramName a owl:DatatypeProperty ;
    rdfs:label "diagram name"@en ;
    rdfs:domain dl:Diagram ;
    rdfs:range xsd:string .

dl:orientation a owl:DatatypeProperty ;
    rdfs:label "orientation"@en ;
    rdfs:comment "Diagram orientation: vertical or horizontal"@en ;
    rdfs:domain dl:Diagram ;
    rdfs:range xsd:string .

# ===================================================================
# Properties - DiagramObject (link Equipment â†’ Position)
# ===================================================================

dl:identifiedObject a owl:ObjectProperty ;
    rdfs:label "identified object"@en ;
    rdfs:comment "Links DiagramObject to the actual equipment (ConductingEquipment, VoltageLevel, Bay, etc.)"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range cim:IdentifiedObject .

dl:diagramObjectPoints a owl:ObjectProperty ;
    rdfs:label "diagram object points"@en ;
    rdfs:comment "List of points defining the position and shape of the diagram object"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range dl:DiagramObjectPoint .

dl:rotation a owl:DatatypeProperty ;
    rdfs:label "rotation"@en ;
    rdfs:comment "Rotation angle in degrees (0-360)"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range xsd:float .

dl:isPolygon a owl:DatatypeProperty ;
    rdfs:label "is polygon"@en ;
    rdfs:comment "True if the object is a polygon (closed shape), false for polyline"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range xsd:boolean .

dl:drawingOrder a owl:DatatypeProperty ;
    rdfs:label "drawing order"@en ;
    rdfs:comment "Z-index for rendering order (higher = on top)"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range xsd:integer .

# ===================================================================
# Properties - DiagramObjectPoint (x, y coordinates)
# ===================================================================

dl:xPosition a owl:DatatypeProperty ;
    rdfs:label "x position"@en ;
    rdfs:comment "X coordinate in diagram space (pixels or logical units)"@en ;
    rdfs:domain dl:DiagramObjectPoint ;
    rdfs:range xsd:float .

dl:yPosition a owl:DatatypeProperty ;
    rdfs:label "y position"@en ;
    rdfs:comment "Y coordinate in diagram space (pixels or logical units)"@en ;
    rdfs:domain dl:DiagramObjectPoint ;
    rdfs:range xsd:float .

dl:sequenceNumber a owl:DatatypeProperty ;
    rdfs:label "sequence number"@en ;
    rdfs:comment "Order of points in a polyline or polygon (0-indexed)"@en ;
    rdfs:domain dl:DiagramObjectPoint ;
    rdfs:range xsd:integer .

# ===================================================================
# Properties - DiagramObjectStyle (visual styling)
# ===================================================================

dl:style a owl:ObjectProperty ;
    rdfs:label "style"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range dl:DiagramObjectStyle .

dl:strokeColor a owl:DatatypeProperty ;
    rdfs:label "stroke color"@en ;
    rdfs:comment "Line color in hex format (e.g., #FF0000)"@en ;
    rdfs:domain dl:DiagramObjectStyle ;
    rdfs:range xsd:string .

dl:fillColor a owl:DatatypeProperty ;
    rdfs:label "fill color"@en ;
    rdfs:comment "Fill color in hex format (e.g., #FF0000)"@en ;
    rdfs:domain dl:DiagramObjectStyle ;
    rdfs:range xsd:string .

dl:strokeWidth a owl:DatatypeProperty ;
    rdfs:label "stroke width"@en ;
    rdfs:domain dl:DiagramObjectStyle ;
    rdfs:range xsd:float .

# ===================================================================
# Extension Properties - Bay Layout
# ===================================================================

dl:bayIndex a owl:DatatypeProperty ;
    rdfs:label "bay index"@en ;
    rdfs:comment "Horizontal position index of a bay in the voltage level (0-indexed, left to right)"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range xsd:integer .

dl:voltageLevelIndex a owl:DatatypeProperty ;
    rdfs:label "voltage level index"@en ;
    rdfs:comment "Vertical position index of a voltage level in the substation (0-indexed, top to bottom)"@en ;
    rdfs:domain dl:DiagramObject ;
    rdfs:range xsd:integer .

# ===================================================================
# Example Usage
# ===================================================================
# See diagram_layout_example.ttl for concrete examples
